{"version":3,"file":"components/inpage-nav/scripts/inpage_nav.js","sources":["components/inpage-nav/scripts/inpage_nav.js"],"sourcesContent":["/**\n * @file\n * In-page nav related behaviors.\n */\n\n(function ($) {\n  Drupal.behaviors.inpage_navigation = {\n    fixWidth: function($e, $parent) {\n      // Adjust width dinamcally to parent.\n      var blockWidth = 'auto';\n      blockWidth = $parent.width() + 'px';\n      $e.css({\n        'width' : blockWidth\n      });\n    },\n\n    currentTitle: function($navBar, $navBarCurrent) {\n      // Clear title for In page nav navbar title if nothing selected.\n      var currentItem = $(\"li.active > a\", $navBar);\n      if (currentItem.length == 0) {\n        $navBarCurrent.text(Drupal.settings.inpage_navigation.node_title);\n      }\n      else {\n        $navBarCurrent.text(currentItem.text());\n      }\n    },\n\n    attach: function (context) {\n      $('.inpage-nav').once('page-navigation', function () {\n        var $inPageActive = false,\n            $inPage = $(this),\n            $inPageBlock = $inPage.parents('.inpage-nav__wrapper'),\n            $inPageBlockParent = $inPageBlock.parent(),\n            inPageBlockHeight = $inPageBlock.height(),\n            inPageBlockTop = $inPageBlock.offset().top,\n            $inPageList = $('.inpage-nav__list', $inPage),\n            title = Drupal.settings.inpage_navigation.node_title;\n\n        // Calculate width on window resize, and check offset height of in-page\n        // nav block.\n        $(window).resize(function(e) {\n          Drupal.behaviors.inpage_navigation.fixWidth($inPageBlock, $inPageBlockParent);\n\n          inPageBlockTop = $inPageBlock.offset().top;\n          inPageBlockHeight = $inPageBlock.height();\n\n          // Refresh scrollspy.\n          $('body').scrollspy('refresh');\n        });\n\n        var $navBar = $('<div class=\"inpage-nav__navbar-wrapper is-scrollspy-target\"><nav class=\"navbar navbar-default navbar-fixed-top inpage-nav__navbar\"><div class=\"container inpage-nav__container\"><div class=\"navbar-header inpage-nav__header\"  data-toggle=\"collapse\" data-target=\"#inpage-navigation-list\" aria-expanded=\"false\" aria-controls=\"navbar\"><button type=\"button\" class=\"navbar-toggle collapsed inpage-nav__toggle\"><span class=\"sr-only\">' + Drupal.t(\"Toggle navigation\") + '</span><span class=\"inpage-nav__icon-arrow icon icon--arrow-down\"></span></button><span class=\"navbar-brand inpage-nav__help\">' + Drupal.t('On this page') + '</span><div class=\"inpage-nav__current-wrapper\"><span class=\"navbar-brand inpage-nav__current\">' + title + '</span></div></div><div class=\"navbar-collapse collapse\" id=\"inpage-navigation-list\"><span class=\"inpage-nav__title\" >' + title + '</span>' + $inPage.html() + '</div></div></nav>'),\n            $navBarHeader = $('.inpage-nav__header', $navBar),\n            $navBarCurrent = $('.inpage-nav__current', $navBar),\n            $navBarTitle = $('.inpage-nav__title', $navBar),\n            $navBarHelp = $('.inpage-nav__help', $navBar),\n            $navBarList = $('.inpage-nav__list', $navBar);\n\n        $navBarList.addClass('nav inpage-nav__list--navbar');\n        $('body').append($navBar);\n\n        enquire.register(\"screen and (min-width: 992px)\", {\n          // Desktop.\n          match : function() {\n            // Adding function that is calculating and adding inpage-nav block\n            // width. This is due to usage of position: fixed on the inpage-nav\n            // element.\n            Drupal.behaviors.inpage_navigation.fixWidth($inPageBlock, $inPageBlockParent);\n\n            // Remove class that adds overflow: hidden to body.\n            $('body').removeClass('is-inpage-nav-open');\n            $inPageBlock.affix('checkPosition');\n          },\n\n          setup: function() {\n            // Hide if clicked outside.\n            $('.inpage-nav__navbar', $navBar).click(function(e) {\n              $('#inpage-navigation-list').collapse('hide');\n            });\n\n            // Page navigation scroll spy.\n            $('body').scrollspy({\n                target: '.is-scrollspy-target'\n            });\n\n            $navBar.on('show.bs.collapse', function() {\n              $navBar.addClass('is-collapsing');\n            });\n\n            $navBar.on('shown.bs.collapse', function() {\n              $navBar.addClass('is-collapsed');\n              $navBar.removeClass('is-collapsing');\n            });\n\n            $navBar.on('hide.bs.collapse', function() {\n              $navBar.removeClass('is-collapsed');\n              $('body').removeClass('is-inpage-nav-open');\n            });\n\n            $navBar.on(\"activate.bs.scrollspy\", function(e) {\n              // Set title to current;.\n              Drupal.behaviors.inpage_navigation.currentTitle($navBar, $navBarCurrent);\n            });\n\n            // Affix.\n            $inPageBlock.affix({\n              offset: {\n                top: function () {\n                  return (Math.floor($inPageBlock.parent().offset().top) - 30);\n                },\n                bottom: function () {\n                  return ($('.footer').outerHeight(true) + $('.footer-top').outerHeight(true) + 20);\n                }\n              }\n            });\n\n            $(window).scroll(function(e) {\n              $window = $(this);\n              // Set title to current;.\n              Drupal.behaviors.inpage_navigation.currentTitle($navBar, $navBarCurrent);\n\n              // Show navbar if scroll is under the block.\n              var docViewTop = $window.scrollTop(),\n                  docViewBottom = docViewTop + $window.height(),\n                  inPageBottom = inPageBlockTop + inPageBlockHeight - 5;\n\n              if (inPageBottom <= docViewTop) {\n                $navBar.addClass('is-active');\n              }\n              else {\n                $navBar.removeClass('is-active');\n                $('#inpage-navigation-list').collapse('hide');\n              }\n            });\n          },\n\n          // Mobile.\n          unmatch : function() {\n            // Collapse navbar on changing to mobile behavior.\n            if ($('.inpage-nav__navbar-wrapper').hasClass('is-collapsed')) {\n              $('#inpage-navigation-list').collapse('hide');\n            }\n\n            $navBar.on('show.bs.collapse', function() {\n              $('body').addClass('is-inpage-nav-open');\n            });\n\n            $navBar.on('hide.bs.collapse', function() {\n              $('body').removeClass('is-inpage-nav-open');\n            });\n          }\n        });\n      });\n    }\n  }\n})(jQuery);\n"],"names":[],"mappings":"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","sourceRoot":"../src/"}