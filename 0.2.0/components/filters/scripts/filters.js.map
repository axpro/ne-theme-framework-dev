{"version":3,"file":"components/filters/scripts/filters.js","sources":["components/filters/scripts/filters.js"],"sourcesContent":["/**\n * @file\n * Exposed filter related behaviors.\n */\n\n(function ($) {\n  Drupal.behaviors.europa_filters = {\n\n    attach: function (context, settings) {\n      var $filters        = $('.filters'),\n          $filtersSubmit  = $('.filters__btn-submit', $filters),\n          filtersFormId   = $filters.find('form').attr('id'),\n          refineText      = Drupal.t('Refine'),\n          hideText        = Drupal.t('Hide'),\n          clearAll        = Drupal.t('Clear all'),\n          $resultsCount   = $('.filters__result-count'),\n          $itemsNumber    = $('.filters__items-number');\n\n      // Checking if IE8 is used.\n      var oldIE = false;\n      if ($('html').is('.ie8')) {\n        oldIE = true;\n      }\n\n      // Function for hiding Submit and Reset buttons.\n      var hideFilterButtons = function() {\n        $('.filters__btn-collapse, .filters__btn-reset--small').hide();\n      }\n\n      var showFilterButtons = function() {\n        $('.filters__btn-collapse, .filters__btn-reset--small').show();\n      }\n\n      // Adding buttons for the filters.\n      if ($resultsCount.is(':visible') && !$('.filters__btn-collapse').length) {\n        $resultsCount\n          .append(\n            '<div class=\"btn-group\"> \\\n            <button class=\"btn btn-default filters__btn-reset--small hidden js-showonsubmit\">' + clearAll + '\\\n            </button> \\\n              <button class=\"btn btn-primary filters__btn-collapse\" type=\"button\"  \\\n                data-toggle=\"collapse\" data-target=\"#' + Drupal.settings.europa.exposedBlockId + '\"  \\\n                aria-expanded=\"false\" aria-controls=\"collapseFilters\">  \\\n                ' + refineText + '  \\\n              </button> \\\n            </div>'\n          );\n      }\n\n      // Listeners.\n      // Small button emulating the original reset button.\n      $(\".filters__btn-reset--small\").on(\"click\", function(){\n        $(\".filters__btn-reset\").trigger(\"click\");\n      });\n\n      // Runs only once.\n      // Add throbber next to content type and items count text.\n      $filters.once('filters', function() {\n        var throbber = '<div class=\"ajax-progress ajax-progress-throbber\"><i class=\"icon icon--spinner is-spinning\"></i></div>';\n        $(document)\n          .ajaxStart(function(e) {\n            if (e.currentTarget.activeElement.form == 'undefined' && e.currentTarget.activeElement.form.id === filtersFormId) {\n              $itemsNumber\n                .prepend(throbber);\n            }\n          });\n\n        if (typeof enquire !== 'undefined') {\n          // Runs on device width change.\n          enquire.register('screen and (min-width: 992px)', {\n            // Desktop.\n            match : function() {\n              var $filtersWrapper = $(\".filters__wrapper\");\n\n              $filtersSubmit.addClass('ctools-auto-submit-click');\n\n              // Opening filters when changing to desktop.\n              $filters\n                .removeClass('collapse')\n                .addClass('collapse in')\n                .attr('aria-expanded', true)\n                .removeAttr('style');\n\n              // Hiding filter buttons.\n              hideFilterButtons();\n\n              $filters.children('.close').remove();\n              if ($filtersWrapper.length) {\n                $filtersWrapper.children().unwrap(\"<div class='filters__wrapper'></div>\");\n              }\n            },\n            // Mobile.\n            unmatch : function() {\n              // Showing buttons on viewport switch.\n              showFilterButtons();\n\n              $filters.wrapInner(\"<div class='filters__wrapper'></div>\");\n              $filters\n                .removeClass('collapse in')\n                .addClass('collapse')\n                .attr('aria-expanded', false);\n\n              $filtersSubmit.removeClass('ctools-auto-submit-click');\n            },\n\n            setup: function() {\n              // IE8 fix - showing the element containing the filters.\n              if ($(window).width() > 991) {\n                $filters\n                  .removeClass('collapse')\n                  .addClass('collapse in')\n                  .attr('aria-expanded', true)\n                  .removeAttr('style');\n              }\n              else {\n                $filters.addClass('collapse');\n              }\n              $filtersSubmit.removeClass('ctools-auto-submit-click');\n              $filters.wrapInner(\"<div class='filters__wrapper'></div>\");\n\n              if (!oldIE) {\n                $filtersSubmit.click(function () {\n                  if (!$filtersSubmit.hasClass('ctools-auto-submit-click')) {\n                    $filters.collapse('hide');\n                  }\n                });\n              }\n\n              $filters.on('show.bs.collapse', function(){\n                $(this).prepend('<a class=\"close filters__close\" data-toggle=\"collapse\" ' +\n                ' data-target=\"#' + Drupal.settings.europa.exposedBlockId + '\"' +\n                ' aria-expanded=\"true\" aria-controls=\"collapseFilters\">' + hideText + '</a>');\n                hideFilterButtons();\n              });\n\n              $filters.on('hide.bs.collapse', function(){\n                $(this).children('.close').remove();\n                showFilterButtons();\n              });\n            },\n          });\n        }\n      });\n    }\n  };\n})(jQuery);\n"],"names":[],"mappings":"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","sourceRoot":"../src/"}